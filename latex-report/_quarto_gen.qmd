roject:
  type: book

book:
  title: ""  
  chapters:
    - index.qmd
    - sample.qmd
    - sentiments.qmd
    - usage.qmd
    - campus.qmd
    - reproduction.qmd

execute:
  echo: false
  warning: false
  message: false
  error: false
  fig-width: 3        # Increased from 7
  fig-height: 3        # Increased from 5
  fig-align: left
  out-width: "50%"    # Changed from 80% to prevent clipping
  dpi: 300             # Added for better quality

format:
  pdf:
    documentclass: report
    toc: true
    number-sections: true
    pdf-engine: xelatex
    fig-pos: 'H'
    keep-tex: false     # Added to help with debugging if needed
    geometry:
      - top=1in
      - bottom=1in
      - left=1in
      - right=1in
    template-partials:
      - before-body.tex
    include-in-header:
      text: |
        \usepackage{graphicx}
        \usepackage{fancyhdr}
        \usepackage{float}
        \usepackage{xcolor}
        \usepackage{hyperref}
        \hypersetup{
          colorlinks=true,
          linkcolor=uwred,
          urlcolor=uwred
        }
        \definecolor{uwred}{RGB}{197,5,12}
        \definecolor{uwgray}{RGB}{115,115,115}
        \floatplacement{figure}{H}
        
        % Prevent figure overflow
        \setlength{\textfloatsep}{10pt plus 2pt minus 2pt}
        \setlength{\floatsep}{10pt plus 2pt minus 2pt}
        
        \pagestyle{fancy}
        \fancyhf{}
        \fancyhead[L]{\includegraphics[height=0.7cm]{images/DATASCIE_color-center.png}}
        \fancyhead[R]{\thepage}
        \fancyfoot[C]{\small Data Science Institute at UW--Madison}
        \renewcommand{\headrulewidth}{0.4pt}
        \renewcommand{\footrulewidth}{0.4pt}
        
        \fancypagestyle{plain}{
          \fancyhf{}
          \fancyfoot[C]{\small Data Science Institute at UW--Madison}
          \fancyfoot[R]{\thepage}
          \renewcommand{\headrulewidth}{0pt}
          \renewcommand{\footrulewidth}{0.4pt}
        }
        
        \AtBeginDocument{
          \let\oldmaketitle\maketitle
          \renewcommand{\maketitle}{}
        }